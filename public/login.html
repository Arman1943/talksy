<!DOCTYPE html>
<html>
<head>
<title>Login - Voxly</title>
</head>
<body>

<h2>Login</h2>

<input id="user" placeholder="Username"><br>
<input id="pass" type="password" placeholder="Password"><br>

<button onclick="login()">Login</button>
<button onclick="register()">Register</button>

<p id="err"></p>

<script>
async function login(){
const r=await fetch("/login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({username:user.value,password:pass.value})
});
const j=await r.json();
if(j.ok) location.href="/";
else err.innerText=j.msg;
}

async function register(){
const r=await fetch("/register",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({username:user.value,password:pass.value})
});
const j=await r.json();
if(j.ok) location.href="/";
else err.innerText=j.msg;
}
</script>

</body>
</html>
